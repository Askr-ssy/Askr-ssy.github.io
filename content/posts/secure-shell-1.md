---
title: secure_shell 简述之非对称加密
date: 2019-2-15 19:23:36
tags:
- ssh
- rsa
- 非对称加密
description: ssh之非对称加密
mathjax: true
comments: true
---

## SSH简述
&ensp;&ensp;&ensp;&ensp;SSH 全称为Secure Shell , 是一种加密的 __网络传输协议__ ,即理论上任何网络服务都可以用SSH来安全传输，不过主要用于远程登陆系统。SSH的出现主要用于取代以往不安全的Telnet 和非安全shell的替代品，Telnet 与 Berkeley Login，rsh，rexec等协议采用明文传输，容易遭受到攻击，所以应此产生了SSH这种能在非安全网络环境下(容易受到攻击，如互联网)信息的加密完整可靠。

---
## SSH原理
&ensp;&ensp;&ensp;&ensp;谈到SSH就不得不提到SSH的通信原理 __公开密钥加密(Public-Key Cryptography)__ 国内也有叫法叫做 __非对称加密__ ，我个人比较喜欢后者,不过在这里为了更好的说明原理就是用学术名称.

&ensp;&ensp;&ensp;&ensp;公开密钥加密 由两部分组成，一部分是如其名称是一个公共密钥，公钥可以被别人所知，另一个是私有密钥，私钥只能自己知道. 公共密钥加密看似比普通的单密钥加密多了一个公钥,但是这确是 公开密钥加密算法的精髓,保证其能在非安全网络环境下进行安全传输的关键.

---
## 公开密钥加密的原理
&ensp;&ensp;&ensp;&ensp;简单来说，公开密钥加密的核心是采用基于数学问题的密码算法，产生一个公钥和一个密钥，公钥和密钥加密的消息只能由对应的密钥和公钥解密，其自身也无法解密，这种情况下，可以把公钥放出去，因为只有私钥可以解密，任何对密文的修改都会导致私钥无法解密，所以可以在非安全的网络环境下传输。

### 公开密钥加密的数学原理 (RSA算法)
&ensp;&ensp;&ensp;&ensp;这里以RSA算法为版本进行讲解。假设A和B想过通过一个不安全的网络信道进行通信，那么A可以通过以下方式来产生一个公钥和一个密钥
```
1.随意选择两个大的素数 p和q,p!=q,计算 N=pq
2.根据欧拉函数，r = φ (N) = φ(p)φ(q) = φ(p-1)φ(q-1)
3.选择一个小于r,并且与r互质的整数e,并求e关于r的模逆元，命名为d (求d令ed = 1 (mod r))
4.将 p 和 q 销毁
5.(N,e)为公钥,(N,d)为私钥
```
&ensp;&ensp;&ensp;&ensp;如此，B在得知A的公钥(N,e)后，如果想要给A发送一个消息，可以通过提前约定的格式把明文m转化为一个小于N的非负整数n，通过公式 __$c \equiv n^e \pmod{N}$__ 来将密文m转化为c，并且将其传输给a

&ensp;&ensp;&ensp;&ensp;并且，a在得到密文c后通过 __$n \equiv c^d \pmod{N}$__ 来解出n,并且通过约定的格式还原出m.

解码的原理是
__$c^d \equiv n^{e \cdot d} \pmod{N}$__

已知 __$e \cdot d \equiv 1 \pmod{r}$__,即 __$ed = 1 +h\varphi (n)$__.由 欧拉定理可得：

__$n^{ed}=n^{1+h\varphi(n)}=n \left(n^{\varphi(N)}\right)^{h} \equiv n(1)^h \pmod{N} \equiv n \ \pmod{N}$__

由此，就形成了一次完整的RSA公开密钥加密的加密和解密过程。

---

## Linux 下的ssh

&ensp;&ensp;&ensp;&ensp;在Linux 下 SSH 的通常使用方式分为两种。 __一种是自动生成的公钥-私钥对来简单地加密网络连接，随后使用密码认证进行登录，另外一种是人工生成一对公钥和私钥，通过生成的密钥进行认证，这样就可以在不输入密码的情况下登录。任何人都可以自行生成密钥。公钥需要放在待访问的电脑之中，而对应的私钥需要由用户自行保管.___

---

## 参考链接
https://zh.wikipedia.org/zh-hans/Secure_Shell

---
## TODO
- [ ] 加上参考链接
- [ ] 加上图片